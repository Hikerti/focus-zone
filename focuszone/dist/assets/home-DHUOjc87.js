import{j as e,N as z,Q as E,r as j,U as k,S as P,W as $,X as R,Y as N,u as v,Z as y,_ as F}from"./vendor-react-BUtKQChS.js";import{B as w,c as p,u as f,T as _,a as M,C as V,b as A,d as T,e as B,f as D,g as H}from"./cafelist-y6Oea1Uc.js";import{s as C,z as l}from"./vendor-other-D3y6SXq5.js";import{a as S}from"./vendor-axios-xsH4HHeE.js";function O(){return e.jsx(e.Fragment,{children:e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-[92vh] gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("h2",{children:"Добро пожаловать на сайт,"}),e.jsx("h1",{children:"Focus zone"}),e.jsx("h4",{children:"Проходите новые маршруты и изучайте новые места"})]}),e.jsx(w,{children:"Перейти к использованию"})]})})})}function q({className:r,...s}){return e.jsx(z,{"data-slot":"label",className:p("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...s})}const I=E,L=j.createContext({}),i=({...r})=>e.jsx(L.Provider,{value:{name:r.name},children:e.jsx(k,{...r})}),b=()=>{const r=j.useContext(L),s=j.useContext(U),{getFieldState:a}=$(),o=R({name:r.name}),n=a(r.name,o);if(!r)throw new Error("useFormField should be used within <FormField>");const{id:u}=s;return{id:u,name:r.name,formItemId:`${u}-form-item`,formDescriptionId:`${u}-form-item-description`,formMessageId:`${u}-form-item-message`,...n}},U=j.createContext({});function c({className:r,...s}){const a=j.useId();return e.jsx(U.Provider,{value:{id:a},children:e.jsx("div",{"data-slot":"form-item",className:p("grid gap-2",r),...s})})}function d({className:r,...s}){const{error:a,formItemId:o}=b();return e.jsx(q,{"data-slot":"form-label","data-error":!!a,className:p("data-[error=true]:text-destructive",r),htmlFor:o,...s})}function x({...r}){const{error:s,formItemId:a,formDescriptionId:o,formMessageId:n}=b();return e.jsx(P,{"data-slot":"form-control",id:a,"aria-describedby":s?`${o} ${n}`:`${o}`,"aria-invalid":!!s,...r})}function m({className:r,...s}){const{error:a,formMessageId:o}=b(),n=a?String((a==null?void 0:a.message)??""):s.children;return n?e.jsx("p",{"data-slot":"form-message",id:o,className:p("text-destructive text-sm",r),...s,children:n}):null}function h({className:r,type:s,...a}){return e.jsx("input",{type:s,"data-slot":"input",className:p("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...a})}const G=async r=>{try{const s=await S.post("http://localhost:4000/auth/register",r),{user:a}=s.data;return f.getState().setUser(a),s.data}catch(s){console.log(s)}},K=/^(\+7|8)\s?\(?\d{3}\)?[\s-]?\d{3}[\s-]?\d{2}[\s-]?\d{2}$/,Q=l.object({name:l.string().min(1,"Имя пользователя должно быть"),surname:l.string().min(1,"Фамилия пользователя должно быть"),phone:l.string().regex(K,"Неверный формат телефона"),password:l.string().min(8,"Пароль должен состоять из минимум 8 символов"),login:l.string().min(1,"Логин пользователя должно быть"),email:l.string().email("Не верная форма email").min(1,"Почта пользователя должно быть"),description:l.string().max(300,""),adress:l.string()}),W=()=>{const r=f(t=>t.setUser),s=f(t=>t.setLogin),[a,o]=j.useState(!1),n=N({resolver:C(Q),defaultValues:{name:"",surname:"",phone:"",adress:"",password:"",login:"",email:"",description:""}}),u=v({mutationFn:t=>G(t),onSuccess:t=>{console.log("Успешно отправлено:",t),n.reset(),r(t),s(!0)},onError:t=>{console.error("Ошибка при отправке:",t)}});function g(t){u.mutate(t)}return e.jsx(e.Fragment,{children:e.jsx("section",{className:"w-full flex flex-col gap-4 items-center justify-center",children:e.jsx(I,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(g),className:"w-full bg-zinc-900 flex flex-col gap-4 px-4 py-4 rounded-xl",children:[e.jsx("h3",{className:"text-white",children:"Введите свои данные"}),e.jsxs("div",{className:"w-full flex gap-4",children:[e.jsx(i,{control:n.control,name:"surname",render:({field:t})=>e.jsxs(c,{className:"w-1/2",children:[e.jsx(d,{className:"text-white",children:"Фамилия"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:"text",...t,placeholder:"Иванов"})}),e.jsx(m,{})]})}),e.jsx(i,{control:n.control,name:"name",render:({field:t})=>e.jsxs(c,{className:"w-1/2",children:[e.jsx(d,{className:"text-white",children:"Имя"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:"text",...t,placeholder:"Иван"})}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"w-full flex gap-4",children:[e.jsx(i,{control:n.control,name:"login",render:({field:t})=>e.jsxs(c,{className:"w-1/2",children:[e.jsx(d,{className:"text-white",children:"Login"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:"text",...t,placeholder:"Russian man"})}),e.jsx(m,{})]})}),e.jsx(i,{control:n.control,name:"email",render:({field:t})=>e.jsxs(c,{className:"w-1/2",children:[e.jsx(d,{className:"text-white",children:"Email"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:"email",...t,placeholder:"xxx@mail.ru"})}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"w-full flex gap-4",children:[e.jsx(i,{control:n.control,name:"password",render:({field:t})=>e.jsxs(c,{className:"w-1/2 relative",children:[e.jsx(d,{className:"text-white",children:"Пароль"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:a?"text":"password",...t,placeholder:"1234567"})}),e.jsx("span",{className:"absolute bottom-[6px] right-2",children:a?e.jsx(y,{className:"text-white",onClick:()=>o(!a)}):e.jsx(F,{className:"text-white",onClick:()=>o(!a)})}),e.jsx(m,{})]})}),e.jsx(i,{control:n.control,name:"phone",render:({field:t})=>e.jsxs(c,{className:"w-1/2",children:[e.jsx(d,{className:"text-white",children:"Телефон"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:"text",...t,placeholder:"+7 999 999 99 99"})}),e.jsx(m,{})]})})]}),e.jsx(i,{control:n.control,name:"adress",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{className:"text-white",children:"Адрес"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:"text",...t,placeholder:"г.Москва, ул. Ленина 56"})}),e.jsx(m,{})]})}),e.jsx(i,{control:n.control,name:"description",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{className:"text-white",children:"Описание"}),e.jsx(x,{children:e.jsx(_,{className:"text-white",...t})}),e.jsx(m,{})]})}),e.jsx(w,{variant:"secondary",type:"submit",children:"Отправить информацию"})]})})})})},X=async r=>{try{const s=await S.post("http://localhost:4000/auth/login",r,{withCredentials:!0}),{user:a}=s.data;return f.getState().setUser(a),s.data}catch(s){console.log(s)}},Y=l.object({password:l.string().min(8,"Пароль должен состоять из минимум 8 символов"),email:l.string().email("Не верная форма email").min(1,"Почта пользователя должно быть")}),Z=()=>{const[r,s]=j.useState(!1),a=f(t=>t.setUser),o=f(t=>t.setLogin),n=N({resolver:C(Y),defaultValues:{password:"",email:""}}),u=v({mutationFn:t=>X(t),onSuccess:t=>{console.log("Успешно отправлено:",t.user),n.reset(),a(t.user),o(!0)},onError:t=>{console.error("Ошибка при отправке:",t)}});function g(t){u.mutate(t)}return e.jsx(e.Fragment,{children:e.jsx("section",{className:"w-full flex flex-col gap-4 items-center justify-center",children:e.jsx(I,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(g),className:"w-full bg-zinc-900 flex flex-col gap-4 px-4 py-5 rounded-xl",children:[e.jsx("h3",{className:"text-white",children:"Введите свои данные"}),e.jsx(i,{control:n.control,name:"email",render:({field:t})=>e.jsxs(c,{children:[e.jsx(d,{className:"text-white",children:"Email"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:"email",...t,placeholder:"xxx@mail.ru"})}),e.jsx(m,{})]})}),e.jsx(i,{control:n.control,name:"password",render:({field:t})=>e.jsxs(c,{className:"relative",children:[e.jsx(d,{className:"text-white",children:"Пароль"}),e.jsx(x,{children:e.jsx(h,{className:"text-white",type:r?"text":"password",...t,placeholder:"1234567"})}),e.jsx("span",{className:"absolute bottom-[6px] right-2",children:r?e.jsx(y,{className:"text-white",onClick:()=>s(!r)}):e.jsx(F,{className:"text-white",onClick:()=>s(!r)})}),e.jsx(m,{})]})}),e.jsx(w,{variant:"secondary",type:"submit",children:"Отправить информацию"})]})})})})},J=()=>{const[r,s]=j.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx("h2",{className:"cursor-pointer border-b-2 border-white transition hover:border-zinc-900",onClick:()=>s(!r),children:"Регистрация"}),e.jsx("span",{className:"w-[2px] bg-zinc-800"}),e.jsx("h2",{className:"cursor-pointer border-b-2 border-white transition hover:border-zinc-900",onClick:()=>s(!r),children:"Вход"})]}),e.jsx("div",{className:"w-4/10 my-8",children:r?e.jsx(W,{}):e.jsx(Z,{})})]})};function ee(){const{data:r}=M({url:"http://localhost:4000/cafe/card_filter/none/1/6",method:"get",queryKey:"cafe_card"});return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"flex w-full flex-col items-center justify-center px-20 gap-4",children:[e.jsx("div",{className:"flex w-full items-start",children:e.jsx("h2",{className:"text-zinc-900",children:"Топ лучших мест"})}),e.jsxs(V,{className:"w-full",children:[e.jsx(A,{className:"w-1/2",children:r==null?void 0:r.map(s=>e.jsx(T,{children:e.jsx(B,{id:s.id,style:"w-full",title:s.title,adress:s.address,imageUrl:s.imageUrl,description:s.description,favourites:s.favourites,createdAt:s.createdAt,rating:s.rating,locationLat:s.locationLat,locationLng:s.locationLng,showArrow:!1},s.id)},s.id))}),e.jsx(D,{}),e.jsx(H,{})]})]})})}const se=()=>{const r=localStorage.getItem("login");return e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsx(ee,{}),r=="false"&&e.jsx(J,{})]})},oe=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{J as F,h as I,Z as a,W as b,oe as p};
