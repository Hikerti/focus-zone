const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-DHUOjc87.js","assets/vendor-react-BUtKQChS.js","assets/vendor-other-D3y6SXq5.js","assets/vendor-leaflet-B36_YpXq.js","assets/vendor-leaflet-PJPjsG9_.css","assets/cafelist-y6Oea1Uc.js","assets/vendor-axios-xsH4HHeE.js","assets/map-Kgjk-RpB.js","assets/layout-DFpPTSI0.js","assets/profile-LN-1b3lq.js","assets/cafeSinglePage-CghmjOr8.js"])))=>i.map(i=>d[i]);
import{r as a,j as t,ae as j,af as f,ag as P,ah as v,ai as L,aj as R}from"./vendor-react-BUtKQChS.js";import{u as w}from"./cafelist-y6Oea1Uc.js";import{a as _}from"./vendor-axios-xsH4HHeE.js";import{H as O}from"./vendor-other-D3y6SXq5.js";import"./vendor-leaflet-B36_YpXq.js";import"./map-Kgjk-RpB.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function d(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=d(e);fetch(e.href,r)}})();const A="modulepreload",S=function(o){return"/"+o},x={},p=function(u,d,l){let e=Promise.resolve();if(d&&d.length>0){let n=function(i){return Promise.all(i.map(m=>Promise.resolve(m).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),y=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));e=n(d.map(i=>{if(i=S(i),i in x)return;x[i]=!0;const m=i.endsWith(".css"),h=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${h}`))return;const c=document.createElement("link");if(c.rel=m?"stylesheet":A,m||(c.as="script"),c.crossOrigin="",c.href=i,y&&c.setAttribute("nonce",y),document.head.appendChild(c),m)return new Promise((g,E)=>{c.addEventListener("load",g),c.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${i}`)))})}))}function r(n){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=n,window.dispatchEvent(s),!s.defaultPrevented)throw n}return e.then(n=>{for(const s of n||[])s.status==="rejected"&&r(s.reason);return u().catch(r)})},C=a.lazy(()=>p(()=>import("./home-DHUOjc87.js").then(o=>o.p),__vite__mapDeps([0,1,2,3,4,5,6,7]))),I=a.lazy(()=>p(()=>import("./layout-DFpPTSI0.js"),__vite__mapDeps([8,1,2,3,4,5,6,7,0,9]))),b=a.lazy(()=>p(()=>import("./map-Kgjk-RpB.js").then(o=>o.p),__vite__mapDeps([7,1,2,3,4,5,6]))),T=a.lazy(()=>p(()=>import("./profile-LN-1b3lq.js").then(o=>o.p),__vite__mapDeps([9,1,2,3,4,5,6,7,0]))),U=a.lazy(()=>p(()=>import("./cafelist-y6Oea1Uc.js").then(o=>o.s),__vite__mapDeps([5,1,2,3,4,6,7]))),z=a.lazy(()=>p(()=>import("./cafeSinglePage-CghmjOr8.js"),__vite__mapDeps([10,1,2,3,4,5,6,7])));function D(){const o=w(l=>l.setUser),u=localStorage.getItem("login");async function d(){var l;try{const e=await _.get("http://localhost:4000/auth/me",{withCredentials:!0});console.log(e),e.data.status,o(e.data.user)}catch(e){if(_.isAxiosError(e))if(((l=e.response)==null?void 0:l.status)===401)try{const r=await _.post("http://localhost:4000/auth/refresh",{},{withCredentials:!0});o(r.data.user)}catch{console.error(e)}else console.error(e)}}return a.useEffect(()=>{u=="true"&&d()},[]),t.jsx(t.Fragment,{children:t.jsx(a.Suspense,{fallback:t.jsx("div",{children:"Загрузка..."}),children:t.jsx(j,{children:t.jsxs(f,{path:"/",element:t.jsx(I,{}),children:[t.jsx(f,{index:!0,element:t.jsx(P,{to:"home",replace:!0})}),t.jsx(f,{path:"home",element:t.jsx(C,{})}),t.jsx(f,{path:"map",element:t.jsx(b,{})}),t.jsx(f,{path:"profile",element:t.jsx(T,{})}),t.jsx(f,{path:"cafelist",element:t.jsx(U,{})}),t.jsx(f,{path:"cafelist/:id",element:t.jsx(z,{})})]})})})})}const V=new O;v.createRoot(document.getElementById("root")).render(t.jsx(a.StrictMode,{children:t.jsx(L,{children:t.jsx(R,{client:V,children:t.jsx(D,{})})})}));
